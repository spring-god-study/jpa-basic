## ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´1 - ê¸°ë³¸ ë¬¸ë²•

### ì†Œê°œ

#### **JPAëŠ” ë‹¤ì–‘í•œ ì¿¼ë¦¬ ë°©ë²•ì„ ì§€ì›í•œë‹¤**

- JPQL
- JPA Criteria
- QueryDSL
- ë„¤ì´í‹°ë¸Œ SQL
- Jdbc API ì§ì ‘ ì‚¬ìš©, MyBatis, SpringJdbcTemplateê³¼ í•¨ê»˜ ì‚¬ìš©

#### **JPQL(Java Persistence Query Language) ì†Œê°œ**

- ê²€ìƒ‰ ì¡°ê±´ì´ í¬í•¨ëœ SQLì´ í•„ìš” (ex. ë‚˜ì´ê°€ 18ì„¸ ì´ìƒì¸ íšŒì› ê²€ìƒ‰)
- **JPQL : SQLì„ ì¶”ìƒí™”í•œ ê°ì²´ì§€í–¥ ì¿¼ë¦¬ ì–¸ì–´**
- SQL ë¬¸ë²•ê³¼ ìœ ì‚¬ (SELECT, FROM, WHERE, GROUP BY, HAVING, JOIN ì§€ì›)
- ì—”í‹°í‹° ê°ì²´ ëŒ€ìƒ ì¿¼ë¦¬(JPQL) vs. ë°ì´í„°ë² ì´ìŠ¤ í…Œì´ë¸” ëŒ€ìƒ ì¿¼ë¦¬(SQL)

```java
String jpql = "select m from Member m where m.name like '%hello%'";
List<Member> result = em.createQuery(jpql, Member.class).getResultList();
```

ğŸ‘‰ í…Œì´ë¸”ì´ ì•„ë‹Œ ê°ì²´ ëŒ€ìƒ ê²€ìƒ‰ (ì—¬ê¸°ì„œ mì€ Member ì—”í‹°í‹°ë¥¼ ê°€ë¦¬í‚´)

- ë‹¨ì : ë™ì  ì¿¼ë¦¬í•˜ê¸° í˜ë“¦ -> JPA Criteria, QueryDSL (ìë°” ì½”ë“œë¡œ ì§œì„œ JPQLì„ ë¹Œë“œí•´ì£¼ëŠ” generatorë¼ê³  í•¨)

#### **Criteria ì†Œê°œ**

- ë‹¨ì : ë„ˆë¬´ ë³µì¡í•˜ê³  ì‹¤ìš©ì„±ì´ ì—†ë‹¤
- Criteria <<<<< QueryDSL
  - ê³µí†µì : ë¬¸ìê°€ ì•„ë‹Œ ìë°” ì½”ë“œë¡œ JPQL ì‘ì„± ê°€ëŠ¥, JPQL ë¹Œë” ì—­í• , ë™ì ì¿¼ë¦¬ ì‘ì„± ê°€ëŠ¥

<details>
<summary>ì½”ë“œ ì°¸ê³ </summary>
<div markdown="1">
<code>
CriteriaBuilder cb = em.getCriteriaBuilder();<br> 
CriteriaQuery&lt;Member&gt; query = cb.createQuery(Member.class);<br>
Root&lt;Member&gt m = query.from(Member.class);<br>
CriteriaQuery&lt;Member&gt cq =  query.select(m).where(cb.equal(m.get("username"), â€œkimâ€));<br>
List&lt;Member&gt resultList = em.createQuery(cq).getResultList();
</code>
</div>
</details>

#### **QueryDSL ì†Œê°œ**

```java
//JPQL
//select m from Member m where m.age > 18
JPAFactoryQuery query = new JPAQueryFactory(em);
QMember m = QMember.member;

List<Member> list =
query.selectFrom(m)
        .where(m.age.get(18))
        .orderBy(m.name.desc())
        .fetch();
```

- ë‹¨ìˆœí•˜ê³  ì‰½ë‹¤ëŠ” ì¥ì  (-> ì˜í•œ ë‹˜ ì™ˆ; ëª¨ë‘ QueryDSL í•˜ì„¸ìš”~~)

#### **ë„¤ì´í‹°ë¸ŒSQL ì†Œê°œ**

- JPAê°€ ì œê³µí•˜ëŠ” SQLì„ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ê°œë…(ìŒ©ì¿¼ë¦¬)
- JPQLë¡œ í•´ê²°í•  ìˆ˜ ì—†ëŠ” íŠ¹ì • DBì— ì˜ì¡´ì ì¸ ê¸°ëŠ¥ (ex. Oracle connect by)

```java
String sql = "SELECT ID, AGE, TEAM_ID, NAME FROM MEMBER WHERE NAME = â€˜kimâ€™";
List<Member> resultList = em.createNativeQuery(sql, Member.class).getResultList();
```

#### **JDBC ì§ì ‘ ì‚¬ìš©, SpringJdbcTemplate**

- JPAë¥¼ ì‚¬ìš©í•˜ë©´ì„œ JDBC ì»¤ë„¥ì…˜ì„ ì§ì ‘ ì‚¬ìš©í•˜ê±°ë‚˜, ìŠ¤í”„ë§ JdbcTemplate, ë§ˆì´ë°”í‹°ìŠ¤ë“±ì„ í•¨ê»˜ ì‚¬ìš© ê°€ëŠ¥
- ì£¼ì˜) ì˜ì†ì„± ì»¨í…ìŠ¤íŠ¸ë¥¼ ì ì ˆí•œ ì‹œì ì— ê°•ì œë¡œ í”ŒëŸ¬ì‹œ í•„ìš”

### ê¸°ë³¸ë¬¸ë²•ê³¼ ì¿¼ë¦¬ API

### í”„ë¡œì ì…˜ (SELECT)

### í˜ì´ì§•

### ì¡°ì¸

### ì„œë¸Œì¿¼ë¦¬

### JPQL íƒ€ì… í‘œí˜„ì‹ê³¼ ê¸°íƒ€ì‹

### ì¡°ê±´ì‹ (CASE ë“±ë“±)

### JPQL í•¨ìˆ˜
